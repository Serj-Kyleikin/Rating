async function getData(t){new Promise(e=>{var t=loadData("https://json.geoiplookup.io/",5e3);t&&e(t)}).then(e=>{sent(e,t)}).catch(e=>{sent(e.name,t)})}async function loadData(e,t){let n=new AbortController;t=setTimeout(()=>{n.abort()},t);let a=await fetch(e,{signal:n.signal});if(a)return clearTimeout(t),await a.json()}async function sent(e,t){let n=new FormData;n.append("ajaxSettings","plugins:users:"+t),n.append("info",JSON.stringify(e));e=document.forms[0];"registration"==t&&(n.append("name",e.elements.name.value),n.append("mail",e.elements.mail.value)),n.append("login",e.elements.login.value),n.append("password",e.elements.password.value);let a=await fetch("/Ajax.php",{method:"POST",body:n});e=await a.text();"verify"==e?document.location.href="":showError(e)}function showError(e){let t=e.split("_"),n,a,o=document.querySelector(".wrong");o&&o.remove(),"password"==t[0]?(a=document.getElementById(t[0]),n="Неверный пароль! Остал","blocked"!=t[1]?n+="2"==t[1]?"ось 2 попытки":"ась 1 попытка":n="Следующая попытка через 1 час!"):(a=document.getElementById(t[2]),n={wrong_a_login:"Неверный логин!",wrong_r_login:"Логин занят!",wrong_r_mail:"Почта уже используется!"}[e]);let l=document.createElement("div");l.className="wrong",a.append(l),l.textContent=n,a.children[1].value=""}