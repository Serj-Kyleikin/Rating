let targets=document.querySelectorAll(".ratingVote");for(let a of targets)a.onmouseover=function(b){let c=parseInt(b.target.getAttribute("data-vote")),d=b.target.parentElement.children;if(!a.parentElement.querySelector(".user_vote")){for(let a=0;a<d.length;a++)a<c?d[a].classList.add("choise"):d[a].classList.remove("choise");a.onmouseout=function(){for(let a=0;a<d.length;a++)d[a].classList.remove("choise")}}a.onclick=function(){addRating(a,c)}};async function addRating(a,b){let c=new FormData;c.append("ajaxSettings","page:Main:addRating"),c.append("vote",b),c.append("article_id",a.closest(".article").getAttribute("data-article"));let d=await fetch("/Ajax.php",{method:"POST",body:c}),e=await d.text();if(!e.match(/^\d{1}$/)){let c=32*e.split("_")[0],d=e.split("_")[1],f=a.parentElement.querySelector(".ratingResult"),g=a.parentElement.querySelector(".voters");f.style.width=c+"px",g.textContent="\u041F\u0440\u043E\u0433\u043E\u043B\u043E\u0441\u043E\u0432\u0430\u043B\u043E: "+d,createEl(a.parentElement,"p","user_vote","\u0412\u0430\u0448\u0430 \u043E\u0446\u0435\u043D\u043A\u0430: "+b)}else if(!a.parentElement.querySelector(".showMessage")){let b=createEl(a.parentElement,"div","showMessage",{0:"\u041F\u0440\u043E\u0433\u043E\u043B\u043E\u0441\u043E\u0432\u0430\u0442\u044C \u043C\u043E\u0433\u0443\u0442 \u0442\u043E\u043B\u044C\u043A\u043E \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438!",1:"\u0412\u044B \u0443\u0436\u0435 \u043F\u0440\u043E\u0433\u043E\u043B\u043E\u0441\u043E\u0432\u0430\u043B\u0438!"}[e]);0==e&&createEl(b,"a","/registration","\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F")}else return}function createEl(a,b,c,d){let e=document.createElement(b);if(a.appendChild(e),e.textContent=d,"a"==b?e.href=c:e.className=c,"div"==b)return e}